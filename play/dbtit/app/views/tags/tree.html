*{ Display a post tree }*
*{ @param Post post }*
*{ @param User user }*
*{ @param Long threadId }*
*{ @param List footNotes }*

<div class="box post ${_user.hasRead(_post) ? "read" : "unread" }" id="post_${_post.id}">
    #{posttitle post:_post, tz:_user?.tz /}

	#{list items:_post.paragraphs.fetch(), as:'paragraph'}
		%{
			// Handle footnotes
			paragraph.footNotes.fetch().each {
				_footNotes << it;
			}
		}%
    	<div class="paragraph" id="paragraph_${paragraph.id}">
	    	<div class="container">
				#{paragraphcontent paragraph:paragraph /}
		
				#{paragraphtools thread:_thread, post:_post, paragraph:paragraph, user:_user /}
			</div>
			
			*{ Affichage des r√©ponses }*
			#{if paragraph.hasAnswers() && _user.hasRead(_post)}
				<div class="answer">
				#{list items:paragraph.answers.fetch(), as:'reply'}
						#{tree thread:_thread, post:reply, user:_user, footNotes:_footNotes /}
				#{/list}
				</div>
			#{/if} *{ paragraph.hasAnswers() }*
		</div> <!-- container -->
    #{/list} *{ paragraphs }*
</div> <!-- post -->
