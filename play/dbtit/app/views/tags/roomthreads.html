*{ @param room The room to render }*
*{ @param pagination }*
*{ @param route }*

#{if _threads.size() > 0}
	<div>
		#{a @Debate.newThread(_room.hash)}&{'createThread'}#{/a}
	</div>
	<div class="box">
		*{%{
			def showThread = { thread ->
				'<a href="' + play.mvc.Router.reverse("Debate.showThread", [hash: thread.hash]) + '" class="item-title">' + thread.title + '</a>'
			}
			def lastPost = { thread -> post = thread.lastPost()
				post.author.name + ', ' + post.date.format("dd MMMM yyyy, HH'h'mm", lang) // TODO , _tz)
			}
		}%
		#{dataview.table _threads, columns: ['debate': showThread, 'lastPost': lastPost] /}}*
		<table class="list">
			<tr>
				<th>&{'debate'}</th>
				<th>&{'lastPost'}</th>
			</tr>
			#{list items:_threads, as:'thread'}
				<tr class="item ${thread_parity}">
					<td>#{a @Debate.showThread(thread.hash), class:'item-title'}${thread.title}#{/a}</td>
					%{ lastPost = thread.lastPost(); }%
					<td>${lastPost.author.name}, &{'at'} #{date date:lastPost.date, tz:_tz /}</td>
				</tr>
			#{/list}
		</table>
		#{pagination.list pagination:_pagination, route:_route /}
	</div>
#{/if}
#{else}
	<p>&{'emtpyRoom'}</p>
	<div>
		#{a @Debate.newThread(_room.hash)}&{'createThread'}#{/a}
	</div>
#{/else}
