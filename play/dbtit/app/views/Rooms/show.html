#{extends 'main.html' /}
#{set title: room.name + " â€” Debate it!" /}
#{set 'moreStyles'}
	#{stylesheet 'form.sass' /}
	#{stylesheet 'box.sass' /}
	#{stylesheet 'pagination.sass' /}
#{/set}

#{if user == null}
	#{set 'moreNav'}
		<nav id="right-nav">#{a @Dbtit.login(request.url)} &{'login'} #{/a}</nav>
	#{/set}
#{/if}

<div>
	<h1>${room.name}</h1>
	#{if user != null}
		#{if user.hasSubscribed(room)}
			#{a @Rooms.unsubscribe(room.hash, request.url)}&{'unsubscribe'}#{/a}
		#{/if}
		#{else}
			#{a @Rooms.subscribe(room.hash, request.url)}&{'subscribe'}#{/a}
		#{/else}
	#{/if}
</div>

#{a @Debate.newThread(room.hash)}&{'createThread'}#{/a}
<div><span class="st_email"></span><span class="st_facebook"></span><span class="st_twitter"></span><span class="st_sharethis" displayText="ShareThis"></span></div>

#{roomthreads threads:threads, pagination:pagination, route:@Rooms.show(room.hash), tz:user?.tz /}
